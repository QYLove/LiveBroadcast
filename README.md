# LiveBroadcast
直播
前端APP
1，直播知识
   1，直播特点
   2，直播流程
2，直播SDK
   1,发起直播
   2，观看直播
3，IM
   1,聊天消息
   2，弹幕消息
   3，礼物消息

后端服务器
1，SERVLET实现接口
   1，直播列表
   2，用户信息
   3，直播房间管理
2，MYSQL与接口
   1，直播房间存储
   2，用户成员存储
   3，房间成员的控制

课程安排
1，直播介绍
   1，直播特点
   2，直播流程
2，需求分析
   1，竞品分析
   2，功能拆解
   3，界面模块
   4，技术模块
3，SDK选型
   1，IM SDK
   2，直播SDK
4，开发编码
   1，实现APP
   2，服务端API

直播入门
1，现状 
   1，直播火
      1，基础条件成熟
         1，4G+WIFI
         2，软硬件水平提升
         3，游戏行业的培养
         4，弹幕文化
      2，人性的驱动
         1，窥探欲
         2，炫耀
         3，虚荣
         4，色
      3，实时互动
         1，文字
         2，图片
         3，视频
   2，直播的赢利点
      1，直播打赏抽成  观众送直播礼物
      2，商品交易分红  真实的商品展示
      3，付费直播提成  独家资源的直播
      4，会员增值服务
      5，广告收入
   3，直播的特点 
      1，点播
         1，视频网站看电视剧
         2，文件存在服务器上
         3，指定节目播放
      2，直播
         1，直播网站看主播
         2，数据实时发送
         3，内容可以更改
   4，直播的基本流程
      1，推流端  
         1，采集
            1，音频采集
               1，采样率8kHz 
               2，位宽16bit 
               3，声道数2
               4，音频帧20ms
               一帧的数据大小=8000*2*16*0.02=5120bit=640byte 
            2，图像采集
               1，分辨率
               2，采样频率
               3，采集格式
               4，传输通道
            3，采集源
               1，摄像头
               2，屏幕录制
               3，文件推流
            4，android采集
               1，setPreviewCallback
               2，MediaRecorder
            5，ios采集
               1，AVFoundation.framework
            6，pc采集
               1，mjpeg-streamer
               2，摄像头
         2，前处理
            1，视频处理内容
               1，美颜
               2，滤镜--GPUImage
               3，水印--图像与水印图片的合并
               4，美白--识别皮肤，调整色值
               5，磨皮--模糊处理 均值模糊、高斯模糊、中值模糊
            2，音频处理内容
               1，混音--音频信号的叠加，采样值溢出的处理
               2，降噪--傅里叶变换
               3，特效
               4，变声--音色、音调 SoundTouch
         3，编码
            1，编码的必要性
               分辨率1280*720
               采集格式YUV420SP
               fps=30帧每秒
               一帧的数据量=1280*720*1.5bit=1382400bit=172800byte=172KB
               一秒的数据量=172*30=5160KB=5M
               1，压缩数据存储空间，减少传输时间
            2，编码的原理
               1，空间冗余：相邻像素之间的相关性
               2，时间冗余：相邻图像之间内容相似
               3，编码冗余：像素值出现的概率不同
               4，视觉冗余：视觉对细节的不敏感性
            3，常见的图像编码器
               1，H264
                  1，NALU：网络提取层单元
                  2，SPS：包括了一个图像序列的所有信息
                  3，PPS；包括了一个图像所有片的信息
                  4，I帧：帧内编码帧
                  5，P帧：前向预测编码帧
                  6，B帧：双向预测编码帧
                  7，GOP：两个I帧之间的图像组
               2，H265
               3，VP8
               4，VP9
            4，常见的音频编码器
               1，AAC
               2，PCM
               3，WAV
               4，OGG
            5，常见的封装格式
               1，FLV
               2，TS
               3，AVI
         4，推流
            1，RTMP
               优点
               1，CDN支持良好
               2，协议简单易实现
               缺点
               1，基于TCP，传输成本高
               2，Adobe私有协议
            2，WebRTC
               优点
               1，W3C标准
               2，基于UDP
               缺点
               1，CDN支持较差
            3，UDP自定义协议
               优点
               1，定制化空间大
               缺点
               1，开发成本高
               2，CDN不友好
            4，优化思路
               1，保证音频的输出
               2，调整码率、FPS、分辨率
                  效果     码率    FPS
                  流畅度   负相关   正相关
                  清晰度   正相关   负相关
               3，减少传输的数据
      2，服务端
         1，转码
            适应不同的网络带宽、不同的终端处理能力和不同的用户需求为直播平台提供很多增值服务
         2，录制 
            录制用于回放
         3，截图 
            截图用于封面
         4，鉴黄
            基于深度学习的图片识别技术，对直播流进行控制
      3，播放端  
         1，拉流
            1，常用的拉流协议
               1，RTMP
               2，HTTP-FLV
               3，HLS
            2，使用场景
               1，RTMP，HTTP-FLV:即时性要求比较高，或有互动需求
               2，HLS：有回放需求，或跨平台需求
         2，解码
            1，编码的逆过程
            2，从音视频的数据中提取原始数据
         3，渲染
            1，视频画面的显示，声音的播放
      4，互动系统  
         1，聊天
            1，用户和主播互动的主要方式
            2，和群聊功能类似
         2，礼物
            1，增强了用户和主播之间的互动交流
            2，平台主要的收入来源
         3，点赞
   5，直播开发辅助工具
      1，推流端--OBS Studio
         1，支持桌面和文件推流
         2，支持多画面、多音频混合推流
         3，支持录制
         4，开源 https://obsproject.com/download
      2，播放器--CUTV测试工具
         1，留信息展示丰富
         2，可设置缓冲时间
         3，网页版 http://www.cutv.com/demo/live_test.swf
      3，其他辅助工具
         1，Softe ACC Converter -- 转化为aac音频
         2，H264BSnalayzer -- 分析h264视频格式
         3，FlvParse -- 分析FLV文件
         4，yuvplayer -- 播放yuv文件

映客直播的实例分析

直播app的需求分析
1，通用模块
   1，设置
      1，消息通知
      2，版本升级
         1，强制更新
         2，检查更新
      3，意见反馈
   2，个人信息
   3，密码相关
   4，注册
   5，登录
2，直播模块
   1，充值
   2，直播列表
   3，
   4，

视频2第三分钟